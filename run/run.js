'use strict';var P2PSpider = require('../lib');var mongoose = require('mongoose')mongoose.connect('mongodb://127.0.0.1:27017/bt-site')require('./model')var Bittorrent = mongoose.model('Bittorrent')var p2p = P2PSpider({  nodesMaxSize: 200,   // be careful  maxConnections: 400, // be careful  timeout: 5000});p2p.on('metadata', function (metadata) {  var hash_info = metadata.magnet.slice(20)  Bittorrent.findOne({ hash_info: hash_info }).exec((err, doc) => {    if (doc) {      Bittorrent.update(        doc,        { $set: { hot: doc.hot + 1, update_at: Date.now() } }      )    } else {      new Bittorrent({        magnet: metadata.magnet,        name: metadata.info.name ? metadata.info.name.toString() : '',        hash_info: hash_info      }).save()    }  })});p2p.listen(6881, '0.0.0.0');